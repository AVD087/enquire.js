(function(t){function e(e,i){this.$elem=t(e),this.options=t.extend({},n,i),this.process()}var n={item:"<li class='toc__item'><a></a></li>",container:"<ul class='toc'></ul>",targets:["h1","h2","h3"],destination:"body"};e.prototype={constructor:e,generateId:function(e){var n=t.trim(e.text()).split(/\s+/,10).join("-").replace(/[^\w\-]*/g,"");return e.prop("id",n),n},getId:function(t){var e=t.prop("id");return e?e:this.generateId(t)},process:function(){var t=this.options.targets.join(","),e=this.$elem.find(t);return this.render(e)},render:function(e){var n=this;return e=e.map(function(t,e){return n.renderItem(e)}),t(this.options.container).append(e).appendTo(this.options.destination),this},linkify:function(t,e){var n=e.data("tocTitle")||e.text(),i=this.getId(e);t.prop("href","#"+i).text(n)},renderItem:function(e){var n=t(e),i=t(this.options.item);return i.addClass(e.tagName.toLowerCase()),this.linkify(i.find("a"),n),i[0]}},t.fn.toc=function(n){return this.each(function(){var i=t(this),s=i.data("toc"),a="object"==typeof n&&n;s||(s=new e(i,a))})},t.fn.toc.defaults=n})(window.jQuery||window.Zepto);