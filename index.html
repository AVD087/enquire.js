<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Awesome Media Queries in JavaScript - enquire.js</title>
    
    <meta name="description" content="enquire.js is a lightweight, pure JavaScript library for responding to CSS media queries. It's totally awesome">
    <meta name="viewport" content="width=device-width">

    <link href="http://fonts.googleapis.com/css?family=Lato:300|Yesteryear" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/enquire.min.css">
    <script src="js/vendor/modernizr-2.5.3.min.js"></script>
</head>
<body data-spy="scroll">
    <!--[if lt IE 7]>
    <p class="chromeframe">Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p>
    <![endif]-->

<a class="github-ribbon hide-for-print" href="https://github.com/WickyNilliams/enquire.js">
    <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
</a>
    
<div class="container">

<header class="header block block--primary" role="banner">
    
    <h1 class="header__title">  
        enquire.js <span class="header__strapline">Awesome Media Queries in JavaScript</span>        
    </h1>

    <div class="buttons hide-for-print">
        <div class="buttons__btn buttons__btn--twitter">
            <a href="https://twitter.com/share" class="twitter-share-button" data-counturl="http://wickynilliams.github.com/enquire.js" data-via="WickyNilliams">Tweet</a>
        <script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
        </script>    
        </div>
        <div class="buttons__btn">
            <iframe src="http://ghbtns.com/github-btn.html?user=wickynilliams&amp;repo=enquire.js&amp;type=watch&amp;count=true"
                    allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
        </div>
        
    </div>
    
</header>

<div class="announcement">
    <p class="announcement__message">
        Version 2 now released! Find out <a href="#v2.0.0">what's new</a>.
    </p>
</div>
    
    <article role="main" class="block block--primary">
        
        <section class="block">
            <h2 id="lowdown" class="block__title">The Lowdown</h2>

            <p>
                <strong>A lightweight, pure JavaScript library for responding to CSS media queries.</strong>.
            </p>
            <ul>
                <li>Execute JavaScript callbacks for media queries matching (and <em>un</em>matching!)</li>
                <li>Simple conditional asset loading</li>
                <li>Clean &amp; intuitive API</li>
                <li>Absolutely tiny - around 0.8kb GZIP'd!</li>
            </ul>

            <h3>Dependencies?</h3>
            <p>
                None! <em>Not even jQuery</em>.
            </p>
            <p>
                The <em>most</em> you will need to do is provide a <code class="language-javascript">matchMedia</code> polyfill if you wish to <a href="#legacy-support">support old/incapable browsers</a>.
            </p>
        </section>

        <section class="block">
            <h2 id="downloads" class="block__title" data-toc-title="Downloads">Downloads &amp; All That Jazz</h2>

            <h3>Latest Build</h3>
            <p>Grab the latest code, ready to go, from one of the locations below:</p>
            <ul>
                <li>
                    <a href="https://github.com/WickyNilliams/enquire.js/raw/master/dist/enquire.js">Development</a> &mdash; unminified
                </li>
                <li>
                    <a href="https://github.com/WickyNilliams/enquire.js/raw/master/dist/enquire.min.js">Production</a> &mdash; minified
                </li>
            </ul>
            <p>
                If you wish to peruse/fork the source, feel free to do so over on <a href="https://www.github.com/WickyNilliams/enquire.js">GitHub</a>.
            </p>

            <h3>Install via Bower</h3>
            <p>
                To install via the <a href="http://twitter.github.com/bower/">bower package manager</a>, enter the following at the command line:
            </p>

<pre><code>bower install enquire</code></pre>

            <h3>Build From Source</h3>
            <p>
                If you would like to build from source (and run all unit tests etc), enter the following at the command line:
            </p>

<pre><code>git clone git://github.com/WickyNilliams/enquire.js.git
cd enquire.js
npm install
grunt
</code></pre>

        </section>
        
        <section class="block">
            <h2 id="api" class="block__title">API</h2>
            
            <div class="api-member">
                <h3 class="api-member__signature">enquire.register( mediaQuery, handler )</h3>
                
                <dl class="api-member__parameters">
                    <dt class="api-member__param-name">mediaQuery <span class="subdued">(Required)</span></dt>
                    <dd class="api-member__param-detail api-member__param-detail--type"><code>string</code></dd>
                    <dd class="api-member__param-detail api-member__param-detail--description">The media query you wish to respond to</dd>
                    
                    <dt class="api-member__param-name">handler <span class="subdued">(Required)</span></dt>
                    <dd class="api-member__param-detail api-member__param-detail--type"><code>function</code> or <code>object</code></dd>
                    <dd class="api-member__param-detail api-member__param-detail--description">
                    
                        <p>A function to handle the media query being matched, or an object to handle more events</p>
                        
                        <div class="api-member api-member--nested">
                            <h4 class="api-member__signature">handler object</h4>
                            
                            <dl class="api-member__parameters">
                                <dt class="api-member__param-name">deferSetup <span class="subdued">(Optional)</span></dt>
                                <dd class="api-member__param-detail api-member__param-detail--type"><code>boolean</code></dd>
                                <dd class="api-member__param-detail api-member__param-detail--description">Flag to determine whether setup function should be deferred until the media query is first matched. Defaults to <code>false</code></dd>
                                
                                <dt class="api-member__param-name">setup <span class="subdued">(Optional)</span></dt>
                                <dd class="api-member__param-detail api-member__param-detail--type"><code>function</code> or <code>array</code></dd>
                                <dd class="api-member__param-detail api-member__param-detail--description">
                                    <p>
                                        A setup function is run just once. By default it will be called <em>as soon as the handler is registered</em>. If <code>deferSetup</code> is set to <code>true</code> setup will instead be called <em>the first time the media query is matched</em>. 
                                    </p>
                                    <p>
                                        An array is a Modernizr.load/yepnope.js compatible object, used to conditionally load assets. Most useful with <code>deferSetup</code> set to <code>true</code>.
                                    </p>
                                </dd>
                                
                                <dt class="api-member__param-name">match <span class="subdued">(Required)</span></dt>
                                <dd class="api-member__param-detail api-member__param-detail--type"><code>function</code></dd>
                                <dd class="api-member__param-detail api-member__param-detail--description">The callback to handle the media query being matched</dd>
                                
                                <dt class="api-member__param-name">unmatch <span class="subdued">(Optional)</span></dt>
                                <dd class="api-member__param-detail api-member__param-detail--type"><code>function</code></dd>
                                <dd class="api-member__param-detail api-member__param-detail--description">The callback to handle the media query being unmatched</dd>
                            </dl>    
                        </div>
                        
                    </dd>
                </dl>
            </div>
            
            <div class="api-member">
                <h3 class="api-member__signature">enquire.unregister( mediaQuery[, handler] )</h3>
                
                <dl class="api-member__parameters">
                    <dt class="api-member__param-name">mediaQuery <span class="subdued">(Optional)</span></dt>
                    <dd class="api-member__param-detail api-member__param-detail--type"><code>string</code></dd>
                    <dd class="api-member__param-detail api-member__param-detail--description">The media query you wish to respond to</dd>
                    
                    <dt class="api-member__param-name">handler <span class="subdued">(Required)</span></dt>
                    <dd class="api-member__param-detail api-member__param-detail--type"><code>function</code> or <code>object</code></dd>
                    <dd class="api-member__param-detail api-member__param-detail--description">A function to handle the media query being matched, or an object to handle more events</dd>
                </dl>    
            </div>
            
        </section>

        <section class="block">
            <h2 id="walkthrough" class="block__title">Walkthrough</h2>

            <h3>enquire.register</h3>
            <p>
                The main method you will be dealing with is <code class="language-javascript">register</code>. Its basic signature is as follows:
            </p>

<pre class="language-javascript"><code>enquire.register(mediaQuery /* string */, handler /* function || object || array ||  */);</code></pre>

            <p>
                This is the absolute simplest usage of enquire:
            </p>

<pre class="language-javascript"><code>enquire.register("screen and (min-width:40em)", function() {

    // runs every time the query is matched
    
});
</code></pre>

            <p>
                By supplying just a function to <code>register</code>, you will be able to respond to a query being matched. Be aware, that the function is called <em>every time</em> a query is matched - so if a query transitions from matched to unmatched and back to matched, the function will have been executed twice. Sometimes this is fine, but often it is limiting and you will want greater control. Luckily, enquire has you covered!
            </p>
            <p>
                Instead of a function you can pass an object to <code>register</code>. This allows you to have a callback for both match and unmatch:
            </p>
            
<pre class="language-javascript"><code>enquire.register("screen and (min-width: 40em"), {
    
    
    match : function() {

        // REQUIRED
        // Triggered when the media query transitions 
        // *from an unmatched state to a matched state*
    
    },      

    unmatch : function() {
    
        // OPTIONAL
        // Triggered when the media query transitions 
        // *from a matched state to an unmatched state*.
    
    }  

});
</code></pre>

            <p>
                Being able to respond to a query being unmatched opens up lots of options. For instance you could asynchronously load new content (e.g. a sidebar) into the page when a query is matched, then hide it when it's unmatched. It works in both directions!
            </p>
            
            <p>
                However, a new problem has arisen. What happens when the query is matched a second time? <em>Holy needless-ajax-request, batman</em>. This is where <code>setup</code> comes in:
            </p>
            
<pre class="language-javascript"><code>enquire.register("screen and (min-width: 40em"), {

    setup : function() {
        
        // OPTIONAL
        // Triggered *once* as soon a query is registered
        
    },
    
    match : function() {},      

    unmatch : function() {}

});
</code></pre>

            <p>
                In terms of our scenario, this means we can put our AJAX request for supplementary content in <code>setup</code>. From there, <code>match</code> and <code>unmatch</code> can just show and hide the sidebar. This gives a neat separation of concerns, freeing match and unmatch callbacks from handling upfront work.
            </p>
            <p>
                So now we've got to a point were our task is almost complete, with content being dynamically loaded in and the sidebar shown and hidden on match and unmatch respectively. But we can still make one further improvement! By default <code>setup</code> is executed <em>as soon as the query is registered</em>. What this means is that our AJAX request is being made even on small-screen devices - where it will never be needed! The solution to this problem is simple: <code>deferSetup</code>.
            </p>
            
<pre class="language-javascript"><code>enquire.register("screen and (min-width: 40em"), {

    // OPTIONAL, defaults to false
    // defers setup until first time
    // a media query is matched

    deferSetup : true,

    setup : function() {},
    
    match : function() {},      

    unmatch : function() {}  

});
</code></pre>

        <p>
            And with that simple adjustment, we now make our AJAX request(s) just once, the first time the media query is matched!
        </p>
        
        <p>
            <!-- arrays, multiple handlers -->
        </p>
        
 <pre class="language-javascript"><code>enquire.register("screen and (min-width: 40em"), [{

    deferSetup : true,

    setup : function() {},
    
    match : function() {},      

    unmatch : function() {}  

},

// perhaps this second handler object
// will contain all logic for dealing
// with a main menu at larger sizes

{   
    match : function() {},      

    unmatch : function() {}  

}]);
</code></pre>  

        </section>

        <section class="block">
            <h2 id="delving-deeper" class="block__title">Delving Deeper</h2>
            
            <h3>Can I Haz More Than One Handlerz?</h3>
            <p>
                You can indeed! It can be cumbersome to have all your logic in one handler, so you can also supply an array as the second parameter to <code class="language-javascript">register</code> in order to support multiple handlers per media query:
            </p>

<pre class="language-javascript"><code>enquire.register("screen and (max-width:1000px)", [
    { match : function() { console.log("handler 1 matched"); } },
    { match : function() { console.log("handler 2 matched"); } }
 ]);
</code></pre>

            <h4>Alternatively&hellip;</h4>
            <p>
                You could, if you wish, achieve the same effect by calling register multiple times for the same media query:
            </p>

<pre class="language-javascript"><code>var query = "screen and (max-width:1000px)";

enquire.register(query, {
    match : function() {
        console.log("handler 1 matched");
    }
});

// later in code...

enquire.register(query, {
    match : function() {
        console.log("handler 2 matched");
    }
 });
</code></pre>

            <p>
                Whilst the array pattern is generally preferred, this pattern of multiple calls to <code class="language-javascript">register</code> is useful for when you don't want to register handlers separately.
            </p>

            <h3>Multiple Queries, Sir?</h3>
            <p>
                As well as multiple handlers per media query, multiple media queries can be registered with <code class="language-javascript">enquire</code>. Calls to <code class="language-javascript">register</code> can be chained together for this purpose.
            </p> 

<pre class="language-javascript"><code>enquire.register("screen and (max-width:1000px)", {

    match : function() {
        console.log("handler max-width 1000px");
    }

}).register("screen and (max-width:500px)", {

    match : function() {
        console.log("handler max-width 500px");
    }

});
</code></pre>

            <h3>Unregister Handlers</h3>
            <p>
                Sometimes you may wish to unregister a handler or group of handlers. For that we have the <code class="language-javascript">unregister</code> method.
            </p>

            <p>
                The first parameter that <code class="language-javascript">ungreigster</code> accepts is the media query, and the second is a reference to the specific handler you wish to unregister. The second parameter can be optionally excluded which unregisters <em>all</em> handlers for the supplied media query. When a handler is unregistered its <code class="language-javascript">destroy</code> callback is executed. If a handler does not have a <code class="language-javascript">destroy</code> callback then the <code class="language-javascript">unmatch</code> callback is fired instead. Once a handler is unregistered it will no longer respond to changes to a media query's state.
            </p>
            <p>
                The following example shows how unregister can be used and the effects it has on handlers:
            </p>

<pre class="language-javascript">
<code>//TODO: this is too complicated of an example

var mediaQuery = "screen and (max-width:320px)",

    // handler1 has no destroy or unmatch callback,
    // so nothing happens when it gets unregistered

    handler1 = {                                    
        match : function() {                        
            console.log("handler1 matched");
        }
    },
    
    // handler2 doesn't have a destroy callback,
    // so unmatch is called as a fall back

    handler2 = {                                    
        match : function() {                        
            console.log("handler2 matched");
        },
        unmatch : function() {
            console.log("handler2 unmatched");
        }
    },
    
    // handler3 has both unmatch and destory callbacks,
    // destroy will be called when it is unregistered

    handler3 = {                                    
        match : function() {                        
            console.log("handler3 matched");
        },
        unmatch : function() {
            console.log("handler3 unmatched");
        },
        destroy : function() {
            console.log("handler3 destroyed");
        }
    };

enquire.register(mediaQuery, [ handler1, handler2, handler3 ]);

// unregister just handler3
// logs "handler3 destroyed"

enquire.unregister(mediaQuery, handler3);           

// unregister all handlers for this media query. 
// logs "handler2 unmatched"                                                    

enquire.unregister(mediaQuery);                     
                                                            
</code>
</pre>

            <h3>Mobile-First</h3>
            <p>
                If you're taking a mobile-first approach you will typically run into issues with incapable legacy browsers not understanding CSS3 media queries, meaning that browsers such as <abbr title="Internet Explorer 8">IE8</abbr> will be served the mobile versions of the site. Again, enquire has you covered here!
            </p>
            <p>
                <code class="language-javascript">register</code> can accept an optional third parameter, <code class="language-javascript">shouldDegrade</code>. When this is passed as <code class="language-javascript">true</code> (it defaults to <code class="language-javascript">false</code>) it signifies to enquire that <em>if the browser is incapable of understanding CSS3 media queries, then always consider this query a match</em>. 

            </p>
<pre class="language-javascript"><code>enquire.register("screen and (min-width:900px)", function() {
    
    //execute some code for large-screen devices

}, true); // note the `true`!
</code></pre>

            <p>
                Because this only affects incapable browsers, modern browsers will respect the media query and behave as expected. This allows you to adopt the mobile-first paradigm, whilst still serving a desktop experience to incapable browsers.
            </p>
        </section>        

        <section class="block">
            <h2 id="legacy-support" class="block__title">Legacy Support</h2>
            <p>
                enquire relies on the <code class="language-javascript">matchMedia</code> API, which <a href="http://caniuse.com/matchmedia">isn't universally supported in browsers</a>. Fear not, there are polyfills available which provide various levels of support. Which polyfill you choose is dependent on how much support you need.
            </p>
            <h3>Basic support</h3>
            <p>
                You can use Paul Irish/Scott Jehl's <a href="#">matchMedia polyfill</a> if you just wish to support CSS3 capable browsers who do not implement the matchMedia API (IE9 and Opera 12.0 are the main examples). Use this in combination with enquire's <code>shouldDegrade</code> flag to offer a short-circuit for earlier browsers.
            </p>
            <h3>Deep support</h3>
            <p>
                If you wish to give full support to browsers all the way back to IE6 then you can use David Knight's <a href="#">media-match polyfill</a> instead. With this you do not need to use <code>shouldDegrade</code>, everything will work exactly as you would expect in more modern browsers. This has been tested with enquire and works <strong>all the way back to IE6</strong>.
            </p>
            <p>
                If you are using <a href="http://modernizr.com">Modernizr</a> (and you should be!) it's as easy as this:
            </p>
            
<pre class="language-javascript"><code>Modernizr.load([
    //first test need for polyfill
    {
        test: window.matchMedia,
        nope: "/path/to/polyfill.js"
    },

    //and then load enquire
    "/path/to/enquire.js",
    "/path/to/your/script.js"
]);
</code></pre>
                
            <p>This is the approach that this site adopts.</p>
        </section>
        
        <section class="block">
            <h2 id="changelog" class="block__title">Changelog</h2>
            <h3 id="v2.0.0">v2.0.0 <span class="subdued">(2013-03-01)</span></h3>
            <ul>
                <li>Tinier than ever &mdash; now only 0.8kb minified &amp; GZIP'd</li>
                <li>Improved performance &mdash; resize events replaced with <code>matchMedia.addListener</code></li>
                <li>Simplified API &mdash; <code>listen</code> and <code>fire</code> no longer required</li>
                <li>Streamlined conditional asset loading via Modernizr</li>
            </ul>
            <h3 id="v1.5.6">v1.5.6 <span class="subdued">(2013-01-30)</span></h3>
            <ul>
                <li>Fix bug with missing <code>useCapture</code> parameter on <code>addEventListener</code></li>
            </ul>
        </section>

        <section class="block block--final">
            <h2 id="license" class="block__title">License</h2>
            <p>Licensed under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>.</p>
        </section>
        
    </article>

    <footer class="footer" role="contentinfo">
        <small>Copyright &copy; <a href="http://wicky.nillia.ms" rel="author">Nick Williams</a> 2013</small>
    </footer>
</div>
    
    <script>
        Modernizr.load([
            {
                test : window.matchMedia,
                nope : "https://raw.github.com/paulirish/matchMedia.js/master/matchMedia.js"
            },
            "js/vendor/prism.js",
            "https://raw.github.com/WickyNilliams/enquire.js/experimental/dist/enquire.js",
            "js/main.js"
        ]);
    </script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-34332361-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</body>
</html>