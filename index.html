<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Awesome Media Queries in JavaScript - enquire.js</title>
    
    <meta name="description" content="enquire.js is a tiny, pure javascript library for responding to media queries programmatically. It's totally awesome">
    <meta name="viewport" content="width=device-width">

    <link href="http://fonts.googleapis.com/css?family=Lato:300|Yesteryear" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="css/enquire.min.css">
    <script src="js/vendor/modernizr-2.5.3.min.js"></script>
</head>
<body data-spy="scroll">
    <!--[if lt IE 7]>
    <p class="chromeframe">Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p>
    <![endif]-->

    <a class="hide-phone github-ribbon" href="https://github.com/WickyNilliams/enquire.js">
        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
    </a>
    
<header class="block">
    
    <h1 class="title">
        enquire.js
        <span class="strapline">Awesome Media Queries in JavaScript</span>        
    </h1>

    <div class="buttons hide-phone">
        <div class="btn">
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="WickyNilliams">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
        </script>    
        </div>
        <div class="btn">
            <iframe src="http://ghbtns.com/github-btn.html?user=wickynilliams&amp;repo=enquire.js&amp;type=watch&amp;count=true"
  allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>        
        </div>
        
        
    </div>
    
</header>
<div role="main" class="block">


    <article class="clearfix">

        <section id="what">
            <h2 id="lowdown" class="section-title">The Lowdown</h2>

            <p>
                <strong>A lightweight, pure JavaScript library for responding to CSS media queries</strong>.
            </p>

            <ul>
                <li>Execute JavaScript callbacks for matching media queries</li>
                <li>Listen to browser resize and orientation change events to execute callbacks as media queries are matched (and <em>un</em>matched!)</li>
                <li>Run one-time setup callbacks</li>
                <li>Unregister media queries and have a callback to perform any necessary cleanup</li>
            </ul>

            <h3>Dependencies?</h3>

            <p>None! <em>Not even jQuery</em>.</p>
            <p>
                The <em>most</em> you will need to do is provide a <code class="language-javascript">matchMedia</code> polyfill if you wish to <a href="#legacy-support">support old/incapable browsers</a>.
            </p>

            <h3>Use Cases</h3>
            <ul>
                <li>Responsive Design &mdash; simplify altering your menu for use on small-screen devices.</li>
                <li>Mobile-first Design &mdash; to load in new content and resources for large-screen devices.</li>
            </ul>

        </section>

        <section>
            <h2 id="downloads" class="section-title" data-toc-title="Downloads">Downloads &amp; All That Jazz</h2>

            <h3>Latest Build</h3>
            <p>Grab the latest code, ready to go, from one of the locations below:</p>
            <ul>
                <li>
                    <a href="https://github.com/WickyNilliams/enquire.js/raw/master/dist/enquire.js">Development</a> &mdash; unminified
                </li>
                <li>
                    <a href="https://github.com/WickyNilliams/enquire.js/raw/master/dist/enquire.min.js">Production</a> &mdash; minified
                </li>
            </ul>
            <p>
                If you wish to peruse/fork the source, feel free to do so over on <a href="https://www.github.com/WickyNilliams/enquire.js">GitHub</a>.
            </p>

            <h3>Install via Bower</h3>

            <p>To install via the <a href="http://twitter.github.com/bower/">bower package manager</a>, enter the following at the command line:</p>

<pre><code>bower install enquire</code></pre>

            <h3>Build From Source</h3>

            <p>If you want build from source (and run all unit tests etc):</p>

<pre><code>git clone git://github.com/WickyNilliams/enquire.js.git
cd enquire.js
npm install
grunt
</code></pre>

        </section>

        <section>

            <h2 id="basics" class="section-title">The Basics</h2>

            <h3>enquire.register</h3>

            <p>
                The main method you will be dealing with is <code class="language-javascript">register</code>. It's basic signature is as follows:
            </p>

<pre class="language-javascript"><code>
enquire.register(mediaQuery /* string */, handler /* object || array || function */);
</code></pre>

            <p>
                <code class="language-javascript">query</code> is the media query you wish to handle, and <code class="language-javascript">handler</code> contains any logic to handle the media query. An example of usage is as follows:
            </p>

<pre class="language-javascript"><code>
enquire.register("screen and (max-width:1000px)", {

    match : function() {},      // REQUIRED
                                // Triggered when the media query transitions 
                                // *from an unmatched state to a matched state*

    unmatch : function() {},    // OPTIONAL
                                // If supplied, triggered when the media query transitions 
                                // *from a matched state to an unmatched state*.

    setup : function() {},      // OPTIONAL
                                // If supplied, a one-time setup function 
                                // triggered when the handler is first registered.                           

    deferSetup : true,          // OPTIONAL, defaults to false
                                // If set to true, defers execution the setup function until
                                // the media query is first matched. Setup is still triggered just once.

    destroy : function() {}     //OPTIONAL
                                // If supplied, triggered when a hander is unregistered (covered later). 
                                // Enables you to provide lifecycle to responsive widgets. 
                                // Put cleanup logic here.

}).listen(); // More on this next
</code></pre>

        </section>

        <section>

            <h2 id="responding-to-queries" class="section-title">Responding To Queries</h2>

            <p>
                You may have noticed the call to <code class="language-javascript">listen()</code> in the last example, so let's talk about that. After you've registered your handlers you need to get <code class="language-javascript">enquire</code> up and running. For this you have two options, <code class="language-javascript">fire</code> or <code class="language-javascript">listen</code>.
            </p>

            <p>
                A little note: the <code class="language-javascript">match</code> or <code class="language-javascript">unmatch</code> functions are called if, and only if, a media query's state has changed - that is, matched to unmatched, or unmatched to matched. This is true for both <code class="language-javascript">fire</code> and <code class="language-javascript">listen</code>.
            </p>

            <h3>enquire.fire</h3>

            <p>
                <code class="language-javascript">fire</code> evaluates each of the registered media queries and handlers as they are at that point in time. This triggers the relevant callbacks for each of the media query's handlers, as per the conditions above. <code class="language-javascript">fire</code> is handy if you don't care about browser events and want your handlers to be triggered just once on page load.
            </p>

            <h3>enquire.listen</h3>

            <p>
                <code class="language-javascript">listen</code> registers event handlers for the browser's <strong>resize</strong> and <strong>orientationChange</strong> events. Each time one of these events is triggered, <code class="language-javascript">enquire</code> makes a call to <code class="language-javascript">fire()</code>, causing all media queries and handlers to be re-evaluated.
            </p>

            <p>
                To avoid spamming <code class="language-javascript">enquire</code> with browser events (e.g. if the browser window is rapidly changing size), <code class="language-javascript">listen</code> throttles events so that <code class="language-javascript">fire</code> is only called if there have been no resize or orientation events in the last 500<abbr title="milliseconds">ms</abbr>. This value can be altered by supplying a number of milliseconds as a parameter to <code class="language-javascript">listen</code>:
            </p>

<pre class="language-javascript"><code>
enquire.listen(10000); // 10 seconds, why not?!
</code></pre>

        </section>

        <section>

            <h2 id="delving-deeper" class="section-title">Delving Deeper</h2>
            <h3>Can I Haz More Than One Handlerz?</h3>

            <p>You can indeed! It can be cumbersome to have all your logic in one handler, so you can also supply an array as the second parameter to <code class="language-javascript">register</code> in order to support multiple handlers per media query:</p>

<pre class="language-javascript"><code>
enquire.register("screen and (max-width:1000px)", [
    { match : function() { console.log("handler 1 matched"); } },
    { match : function() { console.log("handler 2 matched"); } }
 ]);
</code></pre>

            <h4>Alternatively&hellip;</h4>

            <p>
                You could, if you wish, achieve the same effect by calling register multiple times for the same media query:
            </p>

<pre class="language-javascript"><code>
var query = "screen and (max-width:1000px)";

enquire.register(query, {
    match : function() {
        console.log("handler 1 matched");
    }
});

// later in code...

enquire.register(query, {
    match : function() {
        console.log("handler 2 matched");
    }
 });
</code></pre>

            <p>
                Whilst the array pattern is generally preferred, this pattern of multiple calls to <code class="language-javascript">register</code> is useful for when you don't want to register all handlers at one time.
            </p>

            <p>
                This won't overwrite any previous handler for the media query as <code class="language-javascript">enquire</code> uses the media query itself as a lookup key on it's internal dictionary. Thus, the second handler is appended to the list of handlers already registered for that media query.
            </p>

            <h3>Multiple Queries, Sir?</h3>

            <p>
                As well as multiple handlers per media query, multiple media queries can be registered with <code class="language-javascript">enquire</code>. Calls to <code class="language-javascript">register</code> can be chained together for this purpose.
            </p> 

<pre class="language-javascript"><code>
enquire.register("screen and (max-width:1000px)", {

    match : function() {
        console.log("handler max-width 1000px");
    }

}).register("screen and (max-width:500px)", {

    match : function() {
        console.log("handler max-width 500px");
    }

}).listen();
</code></pre>

            <h3>Setup</h3>
            <p>
                Supplying a setup callback with your query handler allows you to get all your expensive <abbr title="Document Object Model">DOM</abbr> manipulation out of the way up-front. <strong>The setup callback is called once and once only</strong>. By default it is called when the handler is first registered. You can defer setup until the first time the media query matches by setting the <code class="language-javascript">deferSetup</code> flag to <code class="language-javascript">true</code>.
            </p>

            <h3>Unregister Handlers</h3>
            <p>
                Sometimes you may wish to unregister a handler or group of handlers. For that we have the <code class="language-javascript">unregister</code> method.
            </p>
<pre class="language-javascript"><code>
enquire.unregister(mediaQuery /* string */, handler /* function || object */);
</code></pre>

            <p>
                The first parameter that <code class="language-javascript">ungreigster</code> accepts is the media query, and the second is a reference to the specific handler you wish to unregister. The second parameter can be optionally excluded which unregisters <em>all</em> handlers for the supplied media query. When a handler is unregistered its <code class="language-javascript">destroy</code> callback is executed. If a handler does not have a <code class="language-javascript">destroy</code> callback then the <code class="language-javascript">unmatch</code> callback is fired instead. Once a handler is unregistered it will no longer respond to changes to a media query's state.
            </p>
            <p>
                The following example shows how unregister can be used and the effects it has on handlers:
            </p>

<pre class="language-javascript">
    <code>

var mediaQuery = "screen and (max-width:320px)",

    handler1 = {                                    // handler1 has no destroy or unmatch callback,
        match : function() {                        // so nothing happens when it gets unregistered    
            console.log("handler1 matched");
        }
    },

    handler2 = {                                    // handler2 doesn't have a destroy callback,
        match : function() {                        // so unmatch is called as a fall back
            console.log("handler2 matched");
        },
        unmatch : function() {
            console.log("handler2 unmatched");
        }
    },

    handler3 = {                                    // handler3 has both unmatch and destory callbacks,
        match : function() {                        // destroy will be called when it is unregistered
            console.log("handler3 matched");
        },
        unmatch : function() {
            console.log("handler3 unmatched");
        },
        destroy : function() {
            console.log("handler3 destroyed");
        }
    };

enquire.register(mediaQuery, [ handler1, handler2, handler3 ]);

enquire.unregister(mediaQuery, handler3);           // unregister just handler3
                                                    // logs "handler3 destroyed"
enquire.unregister(mediaQuery);                     // unregister all handlers for this media query. 
                                                    // logs "handler2 unmatched"
    </code>
</pre>

            <p>
                
            </p>

            <h3>Mobile-First</h3>
            <p>
                If you're taking a mobile-first approach you will typically run into issues with incapable legacy browsers not understanding CSS3 media queries, meaning that browsers such as <abbr title="Internet Explorer 8">IE8</abbr> will be served the mobile versions of the site. Again, enquire has you covered here!
            </p>

            <p>
                <code class="language-javascript">register</code> can accept an optional third parameter, <code class="language-javascript">shouldDegrade</code>. When this is passed as <code class="language-javascript">true</code> (it defaults to <code class="language-javascript">false</code>) it signifies to enquire that <em>if the browser is incapable of understanding CSS3 media queries, then always consider this query a match</em>. 

            </p>
<pre class="language-javascript"><code>
enquire.register("screen and (min-width:900px)", function() {
    
    //execute some code for large-screen devices

}, true); // note the `true`!
</code></pre>
            <p>
                Because this only affects incapable browsers, modern browsers will respect the media query and behave as you would expect. This allows you to adopt the mobile-first paradigm, whilst still serving a desktop experience to incapable browsers.
            </p>
        </section>        

        <section>
            <h2 id="legacy-support" class="section-title">Legacy Support</h2>
            <p>
                enquire relies on the <code class="language-javascript">matchMedia</code> API, which <a href="http://caniuse.com/matchmedia">isn't universally supported in browsers</a>. Fear not, using a <a href="https://github.com/paulirish/matchMedia.js/">matchMedia polyfill</a> is more than sufficient for enquire's purposes.
            </p>
            <p>
                If you are using <a href="http://modernizr.com">Modernizr</a> (and you should be!) it's as easy as this:
            </p>
<pre class="language-javascript"><code>
Modernizr.load([
    //first test need for polyfill
    {
        test: window.matchMedia,
        nope: "/path/to/polyfill.js"
    },

    //and then load enquire
    "/path/to/enquire.js"
]);
</code></pre>
        
            <p>This is the approach that this site adopts.</p>

        </section>

        <section>
            <h2 id="license" class="section-title">License</h2>

            <p>Licensed under the <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>.</p>
        </section>
        
    </article>

</div>

<footer class="block">
    <small>Copyright &copy; <a href="http://www.twitter.com/WickyNilliams" rel="author">Nick Williams</a> 2012</small>
</footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>
    <script src="js/vendor/prism.js"></script>
    <script type="text/javascript" src="js/loadr.js"></script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-34332361-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>
</html>
